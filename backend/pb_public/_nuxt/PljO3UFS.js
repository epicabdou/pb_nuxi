import{_ as se}from"./CYKZh6Wd.js";import{_ as re,q as ae,e as ne,r as d,A as le,g as C,j as W,h as ie,c as n,k as u,a as t,b as w,t as c,w as p,F as b,B as O,l as _,n as de,C as ce,y as G,p as M,u as J,D as ue,o as r,d as h,z as A,s as ge,x as ve}from"./DzVV_QxS.js";import{u as pe}from"./WUHYirRz.js";import{P as me}from"./CxIzMdn8.js";import{_ as be}from"./DSuGT9tI.js";import{u as he}from"./9jvVpD2D.js";const ke={key:0,class:"section-padding"},fe={key:1,class:"section-padding"},xe={class:"responsive-container"},we={class:"card p-8 bg-error-50 border border-error-200 text-error-700"},_e={class:"font-medium"},ye={class:"relative bg-gradient-to-r from-primary-50 to-secondary-50 dark:from-background-900 dark:to-background-800 py-12"},Ce={class:"responsive-container"},Me={class:"flex flex-col md:flex-row items-center md:items-start gap-8"},$e={key:0,class:"relative flex-shrink-0"},je={class:"w-24 h-24 md:w-32 md:h-32 rounded-full overflow-hidden border-4 border-white dark:border-background-700 shadow-md transition-transform hover:scale-105 duration-300"},Pe=["src","alt"],Be={class:"absolute -bottom-2 -right-2 bg-primary-500 text-white rounded-full w-8 h-8 flex items-center justify-center shadow-md"},Te={class:"text-xs font-bold"},Ae={class:"flex-grow text-center md:text-left"},Ne={class:"heading-2 text-background-900 dark:text-background-100 mb-2"},Se={key:0,class:"text-background-600 dark:text-background-400 max-w-2xl"},Le={key:1,class:"mt-4 flex flex-wrap gap-2 justify-center md:justify-start"},Ve={class:"py-4 bg-background-100 dark:bg-background-900 border-b border-background-200 dark:border-background-800"},Ie={class:"responsive-container"},We={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},ze={class:"flex text-sm","aria-label":"Breadcrumb"},De={class:"inline-flex items-center space-x-1 md:space-x-3"},Fe={class:"inline-flex items-center"},He={class:"flex items-center"},Re={key:0},qe={class:"flex items-center"},Ee={class:"flex items-center"},Ue={class:"text-primary-600 font-medium"},Ze={class:"flex items-center gap-2"},Ke={class:"relative"},Oe={class:"flex bg-white dark:bg-background-800 rounded-lg border border-background-300 dark:border-background-700 p-1"},Ge={class:"py-8 md:py-12"},Je={class:"responsive-container"},Qe={class:"flex flex-wrap items-center justify-between mb-6 gap-4"},Xe={class:"text-sm text-background-700 dark:text-background-300 font-medium"},Ye={key:0,class:"flex flex-wrap gap-2"},et=["onClick"],tt={key:0,class:"flex justify-center py-12"},ot={key:1,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},st={key:2,class:"space-y-4"},rt={key:3,class:"card-fancy p-8 text-center max-w-2xl mx-auto"},at={class:"flex flex-wrap gap-4 justify-center"},nt={key:4,class:"mt-12 flex justify-center"},lt={class:"flex space-x-1"},it=["disabled"],dt=["onClick"],ct=["disabled"],ut={key:0,class:"py-8 bg-background-100 dark:bg-background-900 border-t border-background-200 dark:border-background-800"},gt={class:"responsive-container"},vt={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"},pt={key:0,class:"w-16 h-16 mx-auto rounded-full overflow-hidden mb-3"},mt=["src","alt"],bt={class:"font-medium text-sm"},ht={__name:"[slug]",setup(kt){const N=ue(),z=pe(),D=ae(),Q=ne(),$=ve(),a=d(null),j=d([]),g=d([]),k=d([]),S=d(!0),L=d(!0),P=d(null),f=d("name"),m=d(localStorage.getItem("productViewMode")||"grid"),i=d(1),B=d(12),F=le().public.pocketbaseUrl,T=C(()=>Math.ceil(g.value.length/B.value));C(()=>{const o=(i.value-1)*B.value,e=o+B.value;return V.value.slice(o,e)});const X=o=>{i.value=o,window.scrollTo({top:0,behavior:"smooth"})},Y=()=>{i.value<T.value&&(i.value++,window.scrollTo({top:0,behavior:"smooth"}))},ee=()=>{i.value>1&&(i.value--,window.scrollTo({top:0,behavior:"smooth"}))},H=C(()=>a.value?j.value.filter(o=>o.parent===a.value.id):[]),R=C(()=>a.value?a.value.parent?j.value.filter(o=>o.parent===a.value.parent&&o.id!==a.value.id):j.value.filter(o=>o.id!==a.value.id).slice(0,6):[]),V=C(()=>{if(!g.value.length)return[];const o=[...g.value],e=f.value.replace("-",""),l=f.value.startsWith("-");return o.sort((x,s)=>{let v=x[e],y=s[e];return e==="price"&&(v=x.promoPrice||x.price,y=s.promoPrice||s.price),typeof v=="number"?l?y-v:v-y:typeof v=="string"?l?y.localeCompare(v):v.localeCompare(y):0})}),q=o=>D.isInWishlist(o),E=async()=>{S.value=!0,P.value=null;try{const{$pb:o}=J(),e=await o.collection("categories").getFirstListItem(`slug="${N.params.slug}"`,{expand:"parent"});a.value=e;const l=await o.collection("categories").getList(1,100);j.value=l.items,I()}catch(o){console.error("Error fetching category:",o),P.value="Category not found or unavailable."}finally{S.value=!1}},I=async()=>{if(a.value){L.value=!0,i.value=1;try{const{$pb:o}=J(),e=await o.collection("products").getList(1,100,{filter:`category~"${a.value.id}"`,sort:f.value,expand:"category,tags"});g.value=e.items}catch(o){console.error("Error fetching products:",o)}finally{L.value=!1}}},U=o=>{const e=o.quantity||1;z.addItem({id:o.id,name:o.name,price:o.promoPrice||o.price,image:o.image,quantity:e}),$.success(`${o.name} added to cart`),z.toggleCart()},Z=async o=>{if(!Q.isAuthenticated){ge("/login?redirect="+encodeURIComponent(N.fullPath));return}try{const e=await D.toggleWishlist(o.id);e.added?$.success(`${o.name} added to wishlist`):e.removed&&$.info(`${o.name} removed from wishlist`)}catch(e){console.error("Error toggling wishlist:",e),$.error("An error occurred")}},te=o=>{k.value=k.value.filter(e=>e.id!==o),K()},oe=()=>{k.value=[],K()},K=()=>{I()};return W(m,o=>{localStorage.setItem("productViewMode",o)}),W(()=>N.params.slug,(o,e)=>{o!==e&&E()}),W(f,()=>{I()}),ie(()=>{E()}),he(()=>{var o;return{title:a.value?`${a.value.name} | Categories`:"Category",meta:[{name:"description",content:((o=a.value)==null?void 0:o.description)||"Browse products in this category"}]}}),(o,e)=>{var x;const l=se;return r(),n("div",null,[S.value?(r(),n("div",ke,e[3]||(e[3]=[t("div",{class:"responsive-container flex justify-center py-12"},[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})],-1)]))):P.value?(r(),n("div",fe,[t("div",xe,[t("div",we,[t("p",_e,c(P.value),1),w(l,{to:"/categories",class:"btn-outline mt-4"},{default:p(()=>e[4]||(e[4]=[h(" Back to Categories ")])),_:1})])])])):a.value?(r(),n(b,{key:2},[t("section",ye,[t("div",Ce,[t("div",Me,[a.value.image?(r(),n("div",$e,[t("div",je,[t("img",{src:`${O(F)}/api/files/categories/${a.value.id}/${a.value.image}`,alt:a.value.name,class:"w-full h-full object-cover"},null,8,Pe)]),t("div",Be,[t("span",Te,c(g.value.length),1)])])):u("",!0),t("div",Ae,[t("h1",Ne,c(a.value.name),1),a.value.description?(r(),n("p",Se,c(a.value.description),1)):u("",!0),H.value.length?(r(),n("div",Le,[(r(!0),n(b,null,_(H.value,s=>(r(),A(l,{key:s.id,to:`/categories/${s.slug}`,class:"badge-outline-primary transition-all hover:bg-primary-100 dark:hover:bg-primary-900"},{default:p(()=>[h(c(s.name),1)]),_:2},1032,["to"]))),128))])):u("",!0)])])])]),t("section",Ve,[t("div",Ie,[t("div",We,[t("nav",ze,[t("ol",De,[t("li",Fe,[w(l,{to:"/",class:"text-background-600 hover:text-primary-600 transition-colors"},{default:p(()=>e[5]||(e[5]=[h(" Home ")])),_:1})]),t("li",null,[t("div",He,[e[7]||(e[7]=t("span",{class:"mx-2 text-background-500"},"/",-1)),w(l,{to:"/categories",class:"text-background-600 hover:text-primary-600 transition-colors"},{default:p(()=>e[6]||(e[6]=[h("Categories")])),_:1})])]),(x=a.value.expand)!=null&&x.parent?(r(),n("li",Re,[t("div",qe,[e[8]||(e[8]=t("span",{class:"mx-2 text-background-500"},"/",-1)),w(l,{to:`/categories/${a.value.expand.parent.slug}`,class:"text-background-600 hover:text-primary-600 transition-colors"},{default:p(()=>[h(c(a.value.expand.parent.name),1)]),_:1},8,["to"])])])):u("",!0),t("li",null,[t("div",Ee,[e[9]||(e[9]=t("span",{class:"mx-2 text-background-500"},"/",-1)),t("span",Ue,c(a.value.name),1)])])])]),t("div",Ze,[t("div",Ke,[de(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s),class:"input-primary py-2 pl-3 pr-8 text-sm rounded-lg appearance-none cursor-pointer"},e[10]||(e[10]=[G('<option value="name" data-v-97e17cbd>Name (A-Z)</option><option value="-name" data-v-97e17cbd>Name (Z-A)</option><option value="price" data-v-97e17cbd>Price (Low to High)</option><option value="-price" data-v-97e17cbd>Price (High to Low)</option><option value="-created" data-v-97e17cbd>Newest</option>',5)]),512),[[ce,f.value]]),e[11]||(e[11]=t("div",{class:"absolute right-2 top-1/2 transform -translate-y-1/2 pointer-events-none"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-background-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),t("div",Oe,[t("button",{onClick:e[1]||(e[1]=s=>m.value="grid"),class:M(["p-1.5 rounded",m.value==="grid"?"bg-primary-100 text-primary-600 dark:bg-primary-900":"text-background-600"])},e[12]||(e[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]),2),t("button",{onClick:e[2]||(e[2]=s=>m.value="list"),class:M(["p-1.5 rounded",m.value==="list"?"bg-primary-100 text-primary-600 dark:bg-primary-900":"text-background-600"])},e[13]||(e[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]),2)])])])])]),t("section",Ge,[t("div",Je,[t("div",Qe,[t("p",Xe,c(g.value.length)+" products found ",1),k.value.length?(r(),n("div",Ye,[(r(!0),n(b,null,_(k.value,s=>(r(),n("div",{key:s.id,class:"flex items-center bg-background-100 dark:bg-background-800 px-3 py-1 rounded-full text-xs"},[t("span",null,c(s.name),1),t("button",{class:"ml-2 text-error-500",onClick:v=>te(s.id)},e[14]||(e[14]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,et)]))),128)),k.value.length>0?(r(),n("button",{key:0,onClick:oe,class:"text-xs text-primary-600 hover:text-primary-700 hover:underline"}," Clear all filters ")):u("",!0)])):u("",!0)]),L.value?(r(),n("div",tt,e[15]||(e[15]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"},null,-1)]))):g.value.length&&m.value==="grid"?(r(),n("div",ot,[(r(!0),n(b,null,_(V.value,s=>(r(),A(me,{key:s.id,product:s,onAddToCart:U,onAddToWishlist:Z,"is-in-wishlist":q(s.id)},null,8,["product","is-in-wishlist"]))),128))])):g.value.length&&m.value==="list"?(r(),n("div",st,[(r(!0),n(b,null,_(V.value,s=>(r(),A(be,{key:s.id,product:s,onAddToCart:U,onAddToWishlist:Z,"is-in-wishlist":q(s.id)},null,8,["product","is-in-wishlist"]))),128))])):(r(),n("div",rt,[e[18]||(e[18]=G('<div class="mb-6 text-primary-500" data-v-97e17cbd><svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-97e17cbd><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-97e17cbd></path></svg></div><h3 class="heading-4 mb-4" data-v-97e17cbd>No products found</h3><p class="text-background-600 dark:text-background-400 mb-6" data-v-97e17cbd>There are currently no products in this category.</p>',3)),t("div",at,[w(l,{to:"/categories",class:"btn-primary"},{default:p(()=>e[16]||(e[16]=[h(" Browse other categories ")])),_:1}),w(l,{to:"/",class:"btn-outline"},{default:p(()=>e[17]||(e[17]=[h(" Return to homepage ")])),_:1})])])),g.value.length>B.value?(r(),n("div",nt,[t("div",lt,[t("button",{onClick:ee,disabled:i.value===1,class:M(["px-3 py-1 rounded-md",i.value===1?"bg-background-200 text-background-500 cursor-not-allowed":"bg-background-200 hover:bg-background-300 text-background-800"])},e[19]||(e[19]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),10,it),(r(!0),n(b,null,_(T.value,s=>(r(),n("button",{key:s,onClick:v=>X(s),class:M(["px-3 py-1 rounded-md",i.value===s?"bg-primary-500 text-white":"bg-background-200 hover:bg-background-300 text-background-800"])},c(s),11,dt))),128)),t("button",{onClick:Y,disabled:i.value===T.value,class:M(["px-3 py-1 rounded-md",i.value===T.value?"bg-background-200 text-background-500 cursor-not-allowed":"bg-background-200 hover:bg-background-300 text-background-800"])},e[20]||(e[20]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),10,ct)])])):u("",!0)])]),R.value.length?(r(),n("section",ut,[t("div",gt,[e[21]||(e[21]=t("h2",{class:"heading-3 mb-6"},"Related Categories",-1)),t("div",vt,[(r(!0),n(b,null,_(R.value,s=>(r(),A(l,{key:s.id,to:`/categories/${s.slug}`,class:"bg-white dark:bg-background-800 rounded-lg shadow-sm hover:shadow-md transition-all p-4 text-center"},{default:p(()=>[s.image?(r(),n("div",pt,[t("img",{src:`${O(F)}/api/files/categories/${s.id}/${s.image}`,alt:s.name,class:"w-full h-full object-cover"},null,8,mt)])):u("",!0),t("h3",bt,c(s.name),1)]),_:2},1032,["to"]))),128))])])])):u("",!0)],64)):u("",!0)])}}},$t=re(ht,[["__scopeId","data-v-97e17cbd"]]);export{$t as default};
