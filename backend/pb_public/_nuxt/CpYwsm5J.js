import{_ as x}from"./CYKZh6Wd.js";import{_ as k,r,e as _,u as L,c as u,a as t,m as C,k as m,n as v,v as w,t as h,d as l,b as P,w as V,o as c,s as N}from"./DzVV_QxS.js";const S={class:"responsive-container section-padding flex justify-center items-center min-h-screen bg-background-100 dark:bg-background-900"},A={class:"card-fancy w-full max-w-md animate-fade-in"},B={class:"input-group"},U={class:"input-group"},D={key:0,class:"input-error-text p-3 bg-error-50 dark:bg-error-950/50 rounded-lg"},E=["disabled"],G={key:0,class:"mr-2"},I={class:"text-center mt-6 body-small"},M={__name:"login",setup(z){const n=r(""),i=r(""),a=r(""),o=r(!1),p=_(),{$pb:g}=L(),b=async()=>{a.value="",o.value=!0;try{const s=await g.collection("users").authWithPassword(n.value,i.value);p.setUser(s.record),p.setLoggedIn(!0);const e=sessionStorage.getItem("redirectPath")||"/";sessionStorage.removeItem("redirectPath"),N(e)}catch(s){console.error("Login error:",s),a.value=s.message||"Failed to login. Please check your credentials."}finally{o.value=!1}},f=async()=>{a.value="",o.value=!0;try{const s=window.location.origin+"/auth/callback";await g.collection("users").authWithOAuth2({provider:"google",scopes:["email","profile"],redirectUrl:s})}catch(s){console.error("Google auth error:",s),a.value=s.message||"Failed to login with Google. Please try again.",o.value=!1}};return(s,e)=>{const y=x;return c(),u("div",S,[t("div",A,[e[9]||(e[9]=t("h1",{class:"heading-3 text-center mb-8 text-black"},"Login",-1)),t("form",{onSubmit:C(b,["prevent"]),class:"space-y-6"},[t("div",null,[e[2]||(e[2]=t("label",{for:"email",class:"input-label"},"Email",-1)),t("div",B,[v(t("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=d=>n.value=d),type:"email",required:"",placeholder:"Enter your email",class:"input-fancy"},null,512),[[w,n.value]])])]),t("div",null,[e[3]||(e[3]=t("label",{for:"password",class:"input-label"},"Password",-1)),t("div",U,[v(t("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=d=>i.value=d),type:"password",required:"",placeholder:"Enter your password",class:"input-fancy"},null,512),[[w,i.value]])])]),a.value?(c(),u("div",D,h(a.value),1)):m("",!0),t("button",{type:"submit",disabled:o.value,class:"btn-primary w-full"},[o.value?(c(),u("span",G,e[4]||(e[4]=[t("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):m("",!0),l(" "+h(o.value?"Logging in...":"Login"),1)],8,E)],32),t("div",{class:"mt-8 space-y-4"},[e[6]||(e[6]=t("div",{class:"divider"},[t("span",{class:"px-2 bg-white dark:bg-background-800 text-background-500"},"OR")],-1)),t("button",{onClick:f,class:"btn-secondary w-full btn-icon-text"},e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})],-1),l(" Login with Google ")]))]),t("p",I,[e[8]||(e[8]=l(" Don't have an account? ")),P(y,{to:"/register",class:"text-primary-600 hover:text-primary-700 font-medium transition-colors duration-200"},{default:V(()=>e[7]||(e[7]=[l("Register")])),_:1})])])])}}},F=k(M,[["__scopeId","data-v-620dbf5e"]]);export{F as default};
