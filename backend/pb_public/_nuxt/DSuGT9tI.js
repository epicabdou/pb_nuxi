import{_ as T}from"./CYKZh6Wd.js";import{A as F,r as W,g as k,c as n,o as s,a as r,b as p,k as l,t as d,w as f,F as C,l as $,z as B,d as m,p as h,m as D}from"./DzVV_QxS.js";import{Q as S}from"./CxIzMdn8.js";const U={class:"flex flex-col sm:flex-row"},O={class:"relative sm:w-1/4 h-48 sm:h-auto overflow-hidden bg-background-100 dark:bg-background-900"},H={class:"absolute top-2 left-2 z-10 flex flex-col gap-2"},q={key:0,class:"badge-primary text-xs font-medium px-2 py-1"},E={key:1,class:"badge bg-secondary-500 text-white text-xs font-medium px-2 py-1"},R={key:2,class:"badge bg-error-500 text-white text-xs font-medium px-2 py-1"},G={key:3,class:"badge bg-background-600 text-white text-xs font-medium px-2 py-1"},J=["src","alt"],K={key:1,class:"w-full h-full flex items-center justify-center bg-background-200 dark:bg-background-800"},X={class:"sm:w-3/4 p-4 flex flex-col"},Y={class:"flex justify-between items-start mb-2"},Z={key:0,class:"flex flex-wrap"},_={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},tt={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},et={class:"text-xl font-medium mb-2"},ot={key:0,class:"text-sm text-background-600 dark:text-background-400 mb-3"},st={key:1,class:"mb-3 flex flex-wrap gap-1"},rt={class:"mt-auto flex flex-col sm:flex-row sm:items-center justify-between gap-3"},nt={class:"flex items-baseline"},at={key:0,class:"text-xl font-bold text-error-600 dark:text-error-500"},it={key:1,class:"ml-3 text-sm text-success-600 font-medium"},lt={key:2,class:"ml-3 text-sm text-error-600 font-medium"},dt={class:"flex gap-2"},ct=["disabled"],xt={__name:"ProductListItem",props:{product:{type:Object,required:!0},isInWishlist:{type:Boolean,default:!1},showCategory:{type:Boolean,default:!0},showDescription:{type:Boolean,default:!0},showTags:{type:Boolean,default:!0}},emits:["add-to-cart","add-to-wishlist"],setup(t,{emit:V}){var v;const i=t,M=V,w=((v=F().public)==null?void 0:v.pocketbaseUrl)||"",x=W(!1),u=k(()=>i.product.promoPrice&&i.product.promoPrice<i.product.price),j=k(()=>{if(!u.value)return 0;const e=i.product.price-i.product.promoPrice;return Math.round(e/i.product.price*100)}),L=k(()=>{if(!i.product.created)return!1;const e=new Date(i.product.created),c=Math.abs(new Date-e);return Math.ceil(c/(1e3*60*60*24))<=14});function A(e,o){return e?typeof e=="string"?`${w}/api/files/products/${o}/${e}`:e.url?e.url:typeof e=="object"&&e.name?`${w}/api/files/products/${o}/${e.name}`:(console.error("Unhandled image format:",e),""):""}function b(e){return!e&&e!==0?"":`$${parseFloat(e).toFixed(2)}`}function P(e){var o;return(o=e.expand)!=null&&o.category?Array.isArray(e.expand.category)?e.expand.category:[e.expand.category]:[]}function z(e,o=150){return e?e.length<=o?e:e.substring(0,o)+"...":""}function I(){x.value=!0}function N(){x.value=!1}function Q(e){M("add-to-cart",e)}return(e,o)=>{var g,y;const c=T;return s(),n("div",{class:h(["card group relative overflow-hidden transition-all duration-300 hover:shadow-modern",{"opacity-75":t.product.stock<=0}])},[r("div",U,[r("div",O,[r("div",H,[t.product.isFeatured?(s(),n("span",q," Featured ")):l("",!0),L.value?(s(),n("span",E," New ")):l("",!0),u.value?(s(),n("span",R," -"+d(j.value)+"% ",1)):l("",!0),t.product.stock<=0?(s(),n("span",G," Out of Stock ")):l("",!0)]),p(c,{to:`/products/${t.product.slug}`,class:"block h-full"},{default:f(()=>[t.product.image?(s(),n("img",{key:0,src:A(t.product.image,t.product.id),alt:t.product.name,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"},null,8,J)):(s(),n("div",K,o[3]||(o[3]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 text-background-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])))]),_:1},8,["to"])]),r("div",X,[r("div",Y,[t.showCategory&&((g=t.product.expand)!=null&&g.category)?(s(),n("div",Z,[(s(!0),n(C,null,$(P(t.product),a=>(s(),B(c,{key:a.id,to:`/categories/${a.slug}`,class:"text-xs text-background-500 hover:text-primary-600 mr-2"},{default:f(()=>[m(d(a.name),1)]),_:2},1032,["to"]))),128))])):l("",!0),r("button",{onClick:o[0]||(o[0]=D(a=>e.$emit("add-to-wishlist",t.product),["prevent"])),class:h(["p-2 hover:bg-background-100 dark:hover:bg-background-800 rounded-full transition-colors",{"text-error-500":t.isInWishlist,"text-background-500":!t.isInWishlist}]),"aria-label":"Add to wishlist"},[t.isInWishlist?(s(),n("svg",_,o[4]||(o[4]=[r("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"},null,-1)]))):(s(),n("svg",tt,o[5]||(o[5]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"},null,-1)])))],2)]),r("h3",et,[p(c,{to:`/products/${t.product.slug}`,class:"hover:text-primary-600 transition-colors"},{default:f(()=>[m(d(t.product.name),1)]),_:1},8,["to"])]),t.product.shortDescription&&t.showDescription?(s(),n("p",ot,d(z(t.product.shortDescription,150)),1)):l("",!0),t.showTags&&((y=t.product.expand)!=null&&y.tags)&&t.product.expand.tags.length?(s(),n("div",st,[(s(!0),n(C,null,$(t.product.expand.tags,a=>(s(),B(c,{key:a.id,to:`/tags/${a.slug}`,class:"text-xs bg-background-100 dark:bg-background-800 px-2 py-0.5 rounded-full text-background-600 dark:text-background-400 hover:bg-primary-100 dark:hover:bg-primary-900 hover:text-primary-700 dark:hover:text-primary-300 transition-colors"},{default:f(()=>[m(d(a.name),1)]),_:2},1032,["to"]))),128))])):l("",!0),r("div",rt,[r("div",nt,[u.value?(s(),n("span",at,d(b(t.product.promoPrice)),1)):l("",!0),r("span",{class:h({"text-xl font-bold":!u.value,"text-base text-background-500 line-through ml-2":u.value})},d(b(t.product.price)),3),t.product.stock>0?(s(),n("span",it," In Stock ")):(s(),n("span",lt," Out of Stock "))]),r("div",dt,[r("button",{onClick:o[1]||(o[1]=D(a=>e.$emit("add-to-cart",t.product),["prevent"])),class:h(["btn-primary py-2 px-4 text-sm",{"opacity-50 cursor-not-allowed":t.product.stock<=0}]),disabled:t.product.stock<=0},o[6]||(o[6]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline-block mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})],-1),m(" Add to Cart ")]),10,ct),r("button",{onClick:I,class:"btn-outline py-2 px-4 text-sm"}," Quick View ")])])])]),p(S,{show:x.value,product:t.product,"is-in-wishlist":t.isInWishlist,onClose:N,onAddToCart:Q,onToggleWishlist:o[2]||(o[2]=a=>e.$emit("add-to-wishlist",t.product))},null,8,["show","product","is-in-wishlist"])],2)}}};export{xt as _};
