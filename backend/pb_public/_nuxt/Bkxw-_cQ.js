import{_ as v}from"./CYKZh6Wd.js";import{r as l,A as y,g as w,h as C,c as r,a as e,t as i,b as B,w as m,F as N,l as V,u as z,o,d as L,z as P,k as b,B as $}from"./DzVV_QxS.js";import{u as A}from"./9jvVpD2D.js";const D={class:"relative bg-gradient-to-b from-background-50 to-background-200 dark:from-background-900 dark:to-background-800 py-10 mb-8"},j={class:"responsive-container"},E={class:"body-large text-background-700 dark:text-background-300 max-w-2xl"},F={class:"flex text-sm","aria-label":"Breadcrumb"},M={class:"inline-flex items-center space-x-1 md:space-x-3"},R={class:"inline-flex items-center"},U={class:"py-8"},q={class:"responsive-container"},H={key:0,class:"flex justify-center py-12"},I={key:1,class:"rounded-lg p-8 bg-error-50 border border-error-200 text-error-700"},O={class:"font-medium"},S={key:2,class:"flex flex-col lg:flex-row gap-8"},T={class:"lg:w-3/4"},G={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},J={key:0,class:"mb-4"},K={class:"w-24 h-24 rounded-full overflow-hidden border-2 border-primary-100 shadow-sm"},Q=["src","alt"],W={class:"font-medium text-center mb-2"},X={key:1,class:"text-sm text-background-600 dark:text-background-400 mb-3 text-center line-clamp-2"},Y={class:"text-xs px-3 py-1 bg-background-100 dark:bg-background-700 rounded-full text-background-700 dark:text-background-300"},Z={key:1,class:"bg-white dark:bg-background-800 rounded-lg shadow-sm p-8 text-center"},ae={__name:"index",setup(ee){const d=l([]),u=l(!0),c=l(null),g=l([]),x=l(20),f=l("name"),_=y().public.pocketbaseUrl,p=async()=>{u.value=!0,c.value=null;try{const{$pb:a}=z(),t=await a.collection("categories").getList(1,50,{sort:f.value,expand:"parent"});d.value=t.items;const n=await a.collection("products").getList(1,100,{expand:"category"});g.value=n.items}catch(a){console.error("Error fetching categories:",a),c.value="Impossible de charger les catégories. Veuillez réessayer."}finally{u.value=!1}},k=a=>g.value.filter(t=>{var n,s;return(s=(n=t.expand)==null?void 0:n.category)==null?void 0:s.some(h=>h.id===a)}).length;return w(()=>Math.ceil(d.value.length/x.value)),C(()=>{p()}),A({title:"Catégories de produits",meta:[{name:"description",content:"Parcourez toutes les catégories de produits dans notre boutique"}]}),(a,t)=>{const n=v;return o(),r("div",null,[e("section",D,[t[3]||(t[3]=e("div",{class:"absolute -z-10 top-0 left-0 right-0 h-full overflow-hidden"},[e("div",{class:"absolute -top-24 right-10 w-80 h-80 bg-primary-200/50 dark:bg-primary-900/20 rounded-full blur-3xl"}),e("div",{class:"absolute bottom-0 left-10 w-80 h-80 bg-secondary-200/50 dark:bg-secondary-900/20 rounded-full blur-3xl"})],-1)),e("div",j,[t[2]||(t[2]=e("h1",{class:"heading-2 mb-6"},"Product Categories",-1)),e("p",E,i(a.pageDescription),1),e("nav",F,[e("ol",M,[e("li",R,[B(n,{to:"/",class:"text-background-600 hover:text-primary-600"},{default:m(()=>t[0]||(t[0]=[L("Accueil")])),_:1})]),t[1]||(t[1]=e("li",null,[e("div",{class:"flex items-center"},[e("span",{class:"mx-2 text-background-500"},"/"),e("span",{class:"text-primary-600"},"Catégories")])],-1))])])])]),e("section",U,[e("div",q,[u.value?(o(),r("div",H,t[4]||(t[4]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"},null,-1)]))):c.value?(o(),r("div",I,[e("p",O,i(c.value),1),e("button",{onClick:p,class:"btn-primary mt-4"},"Réessayer")])):(o(),r("div",S,[e("div",T,[d.value.length?(o(),r("div",G,[(o(!0),r(N,null,V(d.value,s=>(o(),P(n,{key:s.id,to:`/categories/${s.slug}`,class:"bg-white dark:bg-background-800 rounded-lg shadow-sm hover:shadow-md transition-all p-4 flex flex-col items-center"},{default:m(()=>[s.image?(o(),r("div",J,[e("div",K,[e("img",{src:`${$(_)}/api/files/categories/${s.id}/${s.image}`,alt:s.name,class:"w-full h-full object-cover"},null,8,Q)])])):b("",!0),e("h3",W,i(s.name),1),s.description?(o(),r("p",X,i(s.description),1)):b("",!0),e("span",Y,i(k(s.id))+" produits ",1)]),_:2},1032,["to"]))),128))])):(o(),r("div",Z,t[5]||(t[5]=[e("h3",{class:"heading-4 mb-4"},"Aucune catégorie trouvée",-1),e("p",{class:"text-background-600 dark:text-background-400"},"Vérifiez ultérieurement pour de nouvelles catégories.",-1)])))])]))])])])}}};export{ae as default};
